* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  color: var(--color-text-primary);
  background: var(--color-background);
  font: var(--font-body);
}

h1 { font: var(--font-h1); margin: 0; }
h2 { font: var(--font-h2); margin: 0; }
h3, p { margin-top: 0; }

.sparkles {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle at 22% 28%, rgba(255, 255, 255, 0.1) 0 2px, transparent 3px),
    radial-gradient(circle at 70% 36%, rgba(255, 255, 255, 0.08) 0 1.5px, transparent 3px),
    radial-gradient(circle at 44% 62%, rgba(255, 255, 255, 0.08) 0 2px, transparent 3px),
    radial-gradient(circle at 81% 77%, rgba(255, 255, 255, 0.08) 0 2px, transparent 3px);
  animation: sparkle 15s linear infinite;
  opacity: 0.35;
}

@keyframes sparkle {
  from { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  to { transform: translateY(0); }
}

.app-shell { position: relative; z-index: 1; min-height: 100vh; }

.top-header {
  position: sticky;
  top: 0;
  z-index: 10;
  padding: var(--space-16) var(--space-16) 0;
}

.header-inner {
  max-width: 1200px;
  margin: 0 auto;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-pill);
  box-shadow: var(--shadow-soft);
  padding: var(--space-12) var(--space-16);
  display: flex;
  gap: var(--space-16);
  align-items: center;
  justify-content: space-between;
}

.brand-wrap { text-decoration: none; display: inline-flex; align-items: center; gap: var(--space-8); }
.brand-icon {
  width: 38px;
  height: 38px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  background: linear-gradient(145deg, var(--color-warning), #ff9ecf);
}
.brand-text { color: var(--color-text-primary); font: var(--font-h2); }

.header-search {
  flex: 1;
  max-width: 460px;
  display: flex;
  align-items: center;
  gap: var(--space-8);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-pill);
  padding: var(--space-8) var(--space-12);
}

.header-search input {
  border: 0;
  background: transparent;
  width: 100%;
  color: var(--color-text-primary);
  font: inherit;
}

.main-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--space-24) var(--space-16) var(--space-32);
}

.top-nav { display: flex; flex-wrap: wrap; gap: var(--space-8); margin-bottom: var(--space-16); }
.nav-link {
  text-decoration: none;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-pill);
  background: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
  font: var(--font-caption);
}
.nav-link:hover,
.nav-link.active { background: var(--color-surface-elevated); transform: translateY(-1px); }

.small { color: var(--color-muted); }

input,
select,
textarea {
  border: 1px solid var(--color-border);
  border-radius: 14px;
  background: var(--color-surface);
  color: var(--color-text-primary);
  padding: var(--space-8) var(--space-12);
  font: inherit;
}

button:hover,
.btn-primary:hover,
.btn-secondary:hover,
.btn-soft:hover,
.btn-danger:hover { transform: translateY(-1px); filter: brightness(1.04); }

.status { border-radius: 14px; padding: var(--space-12); font-weight: 700; margin-bottom: var(--space-12); }
.status.success { background: rgba(20, 61, 47, 0.9); color: var(--color-success); }
.status.error { background: rgba(67, 23, 45, 0.9); color: var(--color-danger); }

.form-panel {
  padding: var(--space-24);
  margin-bottom: var(--space-24);
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: var(--space-12);
}

.table-wrap { padding: var(--space-16); overflow: auto; }
table { width: 100%; border-collapse: separate; border-spacing: 0 var(--space-8); }
th { color: var(--color-muted); font-size: 0.8rem; font-weight: 800; text-align: left; padding: var(--space-4) var(--space-8); }
td { background: var(--color-surface-elevated); padding: var(--space-8); font-size: 0.93rem; }
td:first-child { border-radius: 12px 0 0 12px; }
td:last-child { border-radius: 0 12px 12px 0; }

.avatar { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; background: var(--color-surface-elevated); }

.section-head a { color: var(--color-text-secondary); font: var(--font-caption); text-decoration: none; }
.section-head a:hover { color: var(--color-text-primary); }

.kid-panel,
.category-panel { padding: var(--space-24); margin-bottom: var(--space-24); }

.category-pills {
  display: flex;
  gap: var(--space-8);
  overflow-x: auto;
  position: sticky;
  top: 86px;
  padding-bottom: var(--space-8);
  z-index: 6;
}

.video-section { margin-top: var(--space-12); }
.video-card {
  text-decoration: none;
  color: inherit;
  min-width: 232px;
  max-width: 232px;
  flex-shrink: 0;
  border-radius: var(--radius-card);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  overflow: hidden;
  transition: transform 0.2s ease;
}
.video-card:hover { transform: translateY(-3px) scale(1.01); }
.video-card .thumb { width: 100%; aspect-ratio: 16 / 9; object-fit: cover; display: block; }
.card-body { padding: var(--space-12); }
.video-title { margin: 0 0 var(--space-4); font-size: 0.95rem; line-height: 1.3; }
.video-meta,
.channel-name { margin: 0; color: var(--color-muted); font: var(--font-caption); }

.empty-state { padding: var(--space-16); border-radius: var(--radius-card); background: var(--color-surface-elevated); color: var(--color-muted); }

.channel-carousel { display: flex; gap: var(--space-16); overflow-x: auto; padding: var(--space-8) 0; scrollbar-width: none; }
.channel-carousel::-webkit-scrollbar { display: none; }
.channel-pill { display: flex; flex-direction: column; align-items: center; gap: var(--space-8); min-width: 92px; text-decoration: none; color: var(--color-text-primary); }
.channel-pill-avatar {
  width: 76px;
  height: 76px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-border);
  background: var(--color-surface-elevated);
  display: grid;
  place-items: center;
}
.channel-pill-name { font-size: 0.78rem; text-align: center; max-width: 90px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.shorts-card { min-width: 148px; max-width: 148px; border-radius: var(--radius-card); background: var(--color-surface); border: 1px solid var(--color-border); overflow: hidden; text-decoration: none; color: inherit; }
.shorts-card .thumb { width: 100%; aspect-ratio: 9 / 16; object-fit: cover; display: block; }

/* Profiles screen */
body.profiles-body { overflow: hidden; opacity: 1; transition: opacity 0.4s ease; }
.profiles-page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-16);
  padding: var(--space-24);
  background:
    radial-gradient(circle at 18% 22%, rgba(95, 109, 255, 0.28), transparent 35%),
    radial-gradient(circle at 78% 30%, rgba(255, 118, 200, 0.22), transparent 32%),
    var(--color-background);
}
.profiles-mascot { font-size: 2rem; }
.brand { margin: 0; font: var(--font-display); color: var(--color-primary); }
.subtitle { margin: 0; font: var(--font-h2); color: #fff; }
.profile-grid {
  width: min(100%, 1024px);
  display: grid;
  grid-template-columns: repeat(4, minmax(160px, 1fr));
  gap: var(--space-24);
  justify-items: center;
}
.profile-tile {
  width: 100%;
  max-width: 190px;
  border: 1px solid var(--color-border);
  background: linear-gradient(180deg, var(--color-surface), var(--color-surface-elevated));
  border-radius: 24px;
  padding: var(--space-16);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-12);
  color: inherit;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.profile-tile:hover,
.profile-tile:focus-visible { transform: translateY(-4px); box-shadow: var(--shadow-elevated); }
.profile-avatar {
  width: 112px;
  height: 112px;
  border-radius: 50%;
  background: var(--color-surface);
  border: 3px solid var(--color-border);
  display: grid;
  place-items: center;
  font: var(--font-h2);
  overflow: hidden;
  text-transform: uppercase;
}
.profile-avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
.profile-name { margin: 0; font: var(--font-h2); color: #fff; }
.parent-link { margin-top: var(--space-8); font: var(--font-caption); color: var(--color-text-primary); text-decoration: underline; }

.overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0, 0, 0, 0.72); z-index: 40; padding: var(--space-16); }
.overlay-card {
  width: min(420px, 100%);
  max-height: calc(100vh - 32px);
  overflow: auto;
  padding: var(--space-16);
  border-radius: var(--radius-card);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-12);
}
.pin-dots { display: flex; gap: var(--space-8); }
.pin-dot { width: 14px; height: 14px; border-radius: 50%; border: 2px solid #6e7681; background: transparent; }
.pin-dot.filled { background: var(--color-primary); border-color: var(--color-primary); }
.pin-dots.error .pin-dot { border-color: #da3633; background: rgba(218, 54, 51, 0.25); }
.keypad { display: grid; grid-template-columns: repeat(3, minmax(72px, 1fr)); gap: var(--space-8); width: 100%; }
.keypad button { min-height: 72px; border-radius: 12px; background: var(--color-surface-elevated); }
.cancel-btn { border-radius: 10px; }
.pin-spacer { visibility: hidden; }

/* Dashboard */
.dashboard-toolbar {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-16);
}
.kid-menu { position: relative; }
.kid-menu-summary {
  list-style: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--space-8);
}
.kid-menu-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  overflow: hidden;
  display: grid;
  place-items: center;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  font-weight: 800;
  text-transform: uppercase;
}
.kid-menu-avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
.kid-menu-label { color: var(--color-text-primary); font: var(--font-caption); }
.kid-menu-popover {
  position: absolute;
  right: 0;
  top: calc(100% + 8px);
  min-width: 180px;
  padding: var(--space-8);
  display: grid;
  gap: var(--space-8);
  z-index: 6;
}
.row-grid { display: grid; gap: var(--space-24); }
.continue-row .video-card { min-width: 280px; max-width: 280px; }

/* Channel */
.channel-header {
  padding: var(--space-24);
  margin-bottom: var(--space-24);
  background: linear-gradient(160deg, rgba(95, 109, 255, 0.22), rgba(255, 118, 200, 0.18), var(--color-surface));
}
.channel-page-meta { display: flex; align-items: center; gap: var(--space-12); }
.channel-page-avatar { width: 64px; height: 64px; border-radius: 50%; object-fit: cover; background: var(--color-surface-elevated); display: grid; place-items: center; }
.channel-hero-title-wrap { display: flex; flex-direction: column; gap: var(--space-8); }
.channel-badge { align-self: flex-start; background: rgba(255, 118, 200, 0.2); color: #ffd8f0; border: 1px solid rgba(255, 118, 200, 0.5); padding: 3px 10px; border-radius: var(--radius-pill); font: var(--font-caption); }

/* Watch + shorts */
.watch-layout { display: grid; gap: var(--space-24); }
.watch-page { max-width: 960px; margin: 0 auto; }
.player-wrap {
  border-radius: var(--radius-card);
  overflow: hidden;
  aspect-ratio: 16 / 9;
  padding: var(--space-8);
  background: var(--color-surface-elevated);
  position: relative;
}
.player-wrap iframe,
#watch-player { width: 100%; height: 100%; border: 0; border-radius: 12px; }
.watch-layout.shorts-mode { max-width: 720px; margin: 0 auto; }
.watch-layout.shorts-mode .player-wrap {
  aspect-ratio: 9 / 16;
  max-width: 420px;
  justify-self: center;
  background: #0a0f16;
}
.watch-now-playing {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 4;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-12);
  padding: var(--space-8) var(--space-12);
  background: rgba(0, 0, 0, 0.7);
}
.watch-now-playing-left { display: flex; align-items: center; gap: var(--space-8); min-width: 0; }
.watch-now-playing-avatar { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; background: var(--color-background); }
.watch-now-playing-meta { display: flex; flex-direction: column; min-width: 0; color: var(--color-text-primary); }
.watch-now-playing-meta strong,
.watch-now-playing-meta span { line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.watch-details { padding: var(--space-24); }
.channel-row { display: flex; align-items: center; gap: var(--space-8); color: var(--color-muted); font-weight: 700; }

.admin-link { text-decoration: none; font: var(--font-caption); color: var(--color-text-secondary); background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-pill); padding: var(--space-8) var(--space-12); }

button:focus-visible,
.btn-primary:focus-visible,
.btn-secondary:focus-visible,
.btn-soft:focus-visible,
.pill:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible { outline: 3px solid rgba(95, 109, 255, 0.45); outline-offset: 2px; }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-4px); }
}

@media (max-width: 1024px) {
  .profile-grid { grid-template-columns: repeat(3, minmax(140px, 1fr)); }
}

@media (max-width: 900px) {
  .header-inner { border-radius: 24px; flex-wrap: wrap; }
  .header-search { max-width: none; width: 100%; }
  .main-content { padding: var(--space-16); }
  .card-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
  .profile-grid { grid-template-columns: repeat(2, minmax(140px, 1fr)); }
}

.approvals-tabs { display: flex; gap: var(--space-8); margin-bottom: var(--space-12); }
.admin-security { margin-top: var(--space-16); padding: var(--space-16); }
.admin-security-row { display: flex; gap: var(--space-8); flex-wrap: wrap; align-items: center; }
.more-wrap { margin-top: var(--space-16); display: flex; justify-content: center; }
.page-head { display: flex; justify-content: space-between; align-items: center; gap: var(--space-12); margin-bottom: var(--space-16); }
